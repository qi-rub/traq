<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Traq.Compiler.Utils</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">traq</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Traq.Compiler.Utils</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Utilities for generating identifiers</a></li><li><a href="#g:2">Environments for compilation</a><ul><li><a href="#g:3">State</a></li><li><a href="#g:4">Output</a></li></ul></li></ul></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:UniqNamesCtx">UniqNamesCtx</a> = <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="Traq-Prelude.html#t:Ident" title="Traq.Prelude">Ident</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:HasUniqNamesCtx">HasUniqNamesCtx</a> s <span class="keyword">where</span><ul class="subs"><li><a href="#v:_uniqNamesCtx">_uniqNamesCtx</a> :: <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> s <a href="Traq-Compiler-Utils.html#t:UniqNamesCtx" title="Traq.Compiler.Utils">UniqNamesCtx</a></li></ul></li><li class="src short"><a href="#v:newIdent">newIdent</a> :: <span class="keyword">forall</span> s m. (<a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> m, <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/mtl-2.2.2/Control-Monad-State-Class.html#t:MonadState" title="Control.Monad.State.Class">MonadState</a> s m, <a href="Traq-Compiler-Utils.html#t:HasUniqNamesCtx" title="Traq.Compiler.Utils">HasUniqNamesCtx</a> s, <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> m) =&gt; <a href="Traq-Prelude.html#t:Ident" title="Traq.Prelude">Ident</a> -&gt; m <a href="Traq-Prelude.html#t:Ident" title="Traq.Prelude">Ident</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LoweringCtx">LoweringCtx</a> sizeT</li><li class="src short"><span class="keyword">type</span> <a href="#t:LoweringOutput">LoweringOutput</a> holeT sizeT costT = [<a href="Traq-CQPL-Syntax.html#t:ProcDef" title="Traq.CQPL.Syntax">ProcDef</a> holeT sizeT costT]</li><li class="src short"><a href="#v:_loweredProcs">_loweredProcs</a> :: <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> (<a href="Traq-Compiler-Utils.html#t:LoweringOutput" title="Traq.Compiler.Utils">LoweringOutput</a> holeT sizeT costT) [<a href="Traq-CQPL-Syntax.html#t:ProcDef" title="Traq.CQPL.Syntax">ProcDef</a> holeT sizeT costT]</li><li class="src short"><a href="#v:addProc">addProc</a> :: <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/mtl-2.2.2/Control-Monad-Writer-Class.html#t:MonadWriter" title="Control.Monad.Writer.Class">MonadWriter</a> (<a href="Traq-Compiler-Utils.html#t:LoweringOutput" title="Traq.Compiler.Utils">LoweringOutput</a> holeT sizeT costT) m =&gt; <a href="Traq-CQPL-Syntax.html#t:ProcDef" title="Traq.CQPL.Syntax">ProcDef</a> holeT sizeT costT -&gt; m ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Utilities for generating identifiers</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:UniqNamesCtx" class="def">UniqNamesCtx</a> = <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/containers-0.6.0.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="Traq-Prelude.html#t:Ident" title="Traq.Prelude">Ident</a> <a href="#t:UniqNamesCtx" class="selflink">#</a></p><div class="doc"><p>A set of already used names.
 This is used to generate new unique identifiers.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:HasUniqNamesCtx" class="def">HasUniqNamesCtx</a> s <span class="keyword">where</span> <a href="#t:HasUniqNamesCtx" class="selflink">#</a></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:_uniqNamesCtx" class="def">_uniqNamesCtx</a> :: <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> s <a href="Traq-Compiler-Utils.html#t:UniqNamesCtx" title="Traq.Compiler.Utils">UniqNamesCtx</a> <a href="#v:_uniqNamesCtx" class="selflink">#</a></p></div><div class="subs instances"><details id="i:HasUniqNamesCtx" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasUniqNamesCtx:HasUniqNamesCtx:1"></span> <a href="Traq-Compiler-Utils.html#t:HasUniqNamesCtx" title="Traq.Compiler.Utils">HasUniqNamesCtx</a> <a href="Traq-Compiler-Utils.html#t:UniqNamesCtx" title="Traq.Compiler.Utils">UniqNamesCtx</a></span> <a href="#t:HasUniqNamesCtx" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:HasUniqNamesCtx:HasUniqNamesCtx:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Traq-Compiler-Utils.html">Traq.Compiler.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_uniqNamesCtx">_uniqNamesCtx</a> :: <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> <a href="Traq-Compiler-Utils.html#t:UniqNamesCtx" title="Traq.Compiler.Utils">UniqNamesCtx</a> <a href="Traq-Compiler-Utils.html#t:UniqNamesCtx" title="Traq.Compiler.Utils">UniqNamesCtx</a> <a href="#v:_uniqNamesCtx" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasUniqNamesCtx:HasUniqNamesCtx:2"></span> <a href="Traq-Compiler-Utils.html#t:HasUniqNamesCtx" title="Traq.Compiler.Utils">HasUniqNamesCtx</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT)</span> <a href="#t:HasUniqNamesCtx" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:HasUniqNamesCtx:HasUniqNamesCtx:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Traq-Compiler-Utils.html">Traq.Compiler.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_uniqNamesCtx">_uniqNamesCtx</a> :: <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT) <a href="Traq-Compiler-Utils.html#t:UniqNamesCtx" title="Traq.Compiler.Utils">UniqNamesCtx</a> <a href="#v:_uniqNamesCtx" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:newIdent" class="def">newIdent</a> :: <span class="keyword">forall</span> s m. (<a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/mtl-2.2.2/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> m, <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/mtl-2.2.2/Control-Monad-State-Class.html#t:MonadState" title="Control.Monad.State.Class">MonadState</a> s m, <a href="Traq-Compiler-Utils.html#t:HasUniqNamesCtx" title="Traq.Compiler.Utils">HasUniqNamesCtx</a> s, <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/base-4.12.0.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> m) =&gt; <a href="Traq-Prelude.html#t:Ident" title="Traq.Prelude">Ident</a> -&gt; m <a href="Traq-Prelude.html#t:Ident" title="Traq.Prelude">Ident</a> <a href="#v:newIdent" class="selflink">#</a></p><div class="doc"><p>Generate a new identifier with the given prefix.</p></div></div><a href="#g:2" id="g:2"><h1>Environments for compilation</h1></a><a href="#g:3" id="g:3"><h2>State</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LoweringCtx" class="def">LoweringCtx</a> sizeT <a href="#t:LoweringCtx" class="selflink">#</a></p><div class="doc"><p>A global lowering context, consisting of
- The set of already used identifiers (to generate unique ones)
- The typing context: mapping all variables in context to their types.</p></div><div class="subs instances"><details id="i:LoweringCtx" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LoweringCtx:HasDefault:1"></span> <a href="Traq-Data-Default.html#t:HasDefault" title="Traq.Data.Default">HasDefault</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT)</span> <a href="#t:LoweringCtx" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LoweringCtx:HasDefault:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Traq-Compiler-Utils.html">Traq.Compiler.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:default_">default_</a> :: <a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT <a href="#v:default_" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LoweringCtx:HasTypingCtx:2"></span> <a href="Traq-ProtoLang-TypeCheck.html#t:HasTypingCtx" title="Traq.ProtoLang.TypeCheck">HasTypingCtx</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT)</span> <a href="#t:LoweringCtx" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LoweringCtx:HasTypingCtx:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Traq-Compiler-Utils.html">Traq.Compiler.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_typingCtx">_typingCtx</a> :: sizeT0 ~ <a href="Traq-Prelude.html#t:SizeType" title="Traq.Prelude">SizeType</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT) =&gt; <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT) (<a href="Traq-ProtoLang-TypeCheck.html#t:TypingCtx" title="Traq.ProtoLang.TypeCheck">TypingCtx</a> sizeT0) <a href="#v:_typingCtx" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LoweringCtx:HasUniqNamesCtx:3"></span> <a href="Traq-Compiler-Utils.html#t:HasUniqNamesCtx" title="Traq.Compiler.Utils">HasUniqNamesCtx</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT)</span> <a href="#t:LoweringCtx" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LoweringCtx:HasUniqNamesCtx:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Traq-Compiler-Utils.html">Traq.Compiler.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_uniqNamesCtx">_uniqNamesCtx</a> :: <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT) <a href="Traq-Compiler-Utils.html#t:UniqNamesCtx" title="Traq.Compiler.Utils">UniqNamesCtx</a> <a href="#v:_uniqNamesCtx" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LoweringCtx:SizeType:4"></span> <span class="keyword">type</span> <a href="Traq-Prelude.html#t:SizeType" title="Traq.Prelude">SizeType</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT)</span> <a href="#t:LoweringCtx" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LoweringCtx:SizeType:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Traq-Compiler-Utils.html">Traq.Compiler.Utils</a></p> <div class="src"><span class="keyword">type</span> <a href="Traq-Prelude.html#t:SizeType" title="Traq.Prelude">SizeType</a> (<a href="Traq-Compiler-Utils.html#t:LoweringCtx" title="Traq.Compiler.Utils">LoweringCtx</a> sizeT) = sizeT</div></details></td></tr></table></details></div></div><a href="#g:4" id="g:4"><h2>Output</h2></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LoweringOutput" class="def">LoweringOutput</a> holeT sizeT costT = [<a href="Traq-CQPL-Syntax.html#t:ProcDef" title="Traq.CQPL.Syntax">ProcDef</a> holeT sizeT costT] <a href="#t:LoweringOutput" class="selflink">#</a></p><div class="doc"><p>The outputs of lowering</p></div></div><div class="top"><p class="src"><a id="v:_loweredProcs" class="def">_loweredProcs</a> :: <a href="file:///home/runner/.cabal/store/ghc-8.6.5/microlens-0.4.14.0-0926a3a05b8397297417c2b09360c0e5e0eaf5add83eb3788b5a9316bb4667b6/share/doc/html/Lens-Micro-Type.html#t:Lens-39-" title="Lens.Micro.Type">Lens'</a> (<a href="Traq-Compiler-Utils.html#t:LoweringOutput" title="Traq.Compiler.Utils">LoweringOutput</a> holeT sizeT costT) [<a href="Traq-CQPL-Syntax.html#t:ProcDef" title="Traq.CQPL.Syntax">ProcDef</a> holeT sizeT costT] <a href="#v:_loweredProcs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addProc" class="def">addProc</a> :: <a href="file:///usr/local/.ghcup/ghc/8.6.5/share/doc/ghc-8.6.5/html/libraries/mtl-2.2.2/Control-Monad-Writer-Class.html#t:MonadWriter" title="Control.Monad.Writer.Class">MonadWriter</a> (<a href="Traq-Compiler-Utils.html#t:LoweringOutput" title="Traq.Compiler.Utils">LoweringOutput</a> holeT sizeT costT) m =&gt; <a href="Traq-CQPL-Syntax.html#t:ProcDef" title="Traq.CQPL.Syntax">ProcDef</a> holeT sizeT costT -&gt; m () <a href="#v:addProc" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>